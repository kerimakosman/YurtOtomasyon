@using Yurt.BL.ViewModels.OdemePlaniVM;
<h3>CreateOdemePlani</h3>

@model OdemePlaniCreateVM



<form class="requires-validation" method="post" asp-controller="OdemePlani" asp-action="CreateOdemePlani" asp-area="Personel">
    <input type="hidden" asp-for="OdemePlaniId" />
    <div class="container py-">
        <div class="row">
            <div class="col-lg-12 mx-auto">
                <div class="card rounded-0 border-0 shadow">
                    <div class="card-body p-5">
                        <div class="row">
                            <div class="col-md-2">
                                <select class="form-select fw-bold" id="taksit">
                                    <option class="fw-bold" selected disabled value="">Taksit Seciniz</option>
                                    @for (int i = 0; i < 12; i++)
                                    {
                                        <option class="fw-bold" value="">@(i + 1)</option>
                                    }
                                </select>
                            </div>
                            <div class="col-md-5 row">
                                <label class="col-form-label col-md-4 fw-bold" asp-for="OdenecekTutar">Odenecek Tutar:</label>
                                <div class="col-md-8">
                                    <input class="form-control fw-bold" type="text" asp-for="OdenecekTutar">
                                </div>
                            </div>
                            <div class="col-md-5 row">
                                <label class="col-form-label col-md-4 fw-bold">Başlama Tarihi:</label>
                                <div class="col-md-8">
                                    <input class="form-control fw-bold" Format="dd.MM.yyyy" type="text" id="tarihSeç">
                                </div>
                            </div>
                        </div>
                        <!--  Bootstrap table-->
                        <div class="table-responsive mt-3">
                            <table class="table table-bordered border-primary">
                                <thead>
                                    <tr>
                                        <th scope="col">Taksit No</th>
                                        <th scope="col">Vade Tarih</th>
                                        <th scope="col">Tutar</th>
                                        <th scope="col">Ödenen</th>
                                        <th scope="col">Kalan</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">

                                    @foreach (var item in Model.TaksitOdemeleri)
                                    {
                                        <tr>
                                            <td class="col-md-2">
                                                <input class="form-control fw-bold" type="text" placeholder="Taksit" asp-for="Taksit" value="@item.Taksit" required>
                                            </td>
                                            <td class="col-md-2">
                                                <input class="form-control fw-bold" type="text" placeholder="Vade Tarihi" asp-for="OdemeTarihi" value="@item.OdemeTarihi" required>
                                            </td>
                                            <td class="col-md-2">
                                                <input class="form-control fw-bold" type="text" placeholder="Tutar" asp-for="Tutar" value="@item.Tutar" required>
                                            </td>
                                            <td class="col-md-2">
                                                <input class="form-control fw-bold" type="text" placeholder="Odenen" asp-for="Odenen" value="@item.Odenen" required>
                                            </td>
                                            <td class="col-md-2">
                                                <input class="form-control fw-bold" type="text" placeholder="Kalan" asp-for="Kalan" value="@item.Kalan" required disabled>
                                            </td>
                                            <td></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <button id="submit" type="submit" class="btn btn-success">Kaydet</button>

                    </div>
                </div>
            </div>
        </div>
    </div>
</form>


@section Scripts{
    
    <script type="text/javascript">
        $(document).ready(function () {

            $("#taksit").change(function () {
                var taksit = $(this).find(":selected").text();
                
                $("#tableBody").children().remove();

                for (i = 0; i < taksit; i++) {
                    var newRow = $("<tr>");
                    var cols = '';
                    cols += '<td class="col-md-2"><input class="form-control fw-bold" type="text" placeholder ="Taksit" id="Taksit" name="Taksit" required ></td>';
                    cols += '<td class="col-md-2"><input class="form-control fw-bold" type="date" placeholder="Vade Tarihi" id="OdemeTarihi" name="OdemeTarihi" required></td>';
                    cols += '<td class="col-md-2"><input class="form-control fw-bold" type="text" placeholder ="Tutar" id="Tutar" name="Tutar" required></td>';
                    cols += '<td class="col-md-2"><input class="form-control fw-bold" type="text" placeholder="Odenen" id="Odenen" name="Odenen" required></td>';
                    cols += '<td class="col-md-2"><input class="form-control fw-bold" type="text" placeholder="Kalan" id="Kalan" name="Kalan" required></td>';
                    newRow.append(cols);
                    cols += $("<td>");
                    $('table').append(newRow);
                }
            })
            $("#tarihSeç").change(function(){
                let tarih = $(this).val();

                console.log("secilen tarih :" + tarih);
            })
        });
    </script>
}
